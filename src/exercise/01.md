# useState : valeur par dÃ©faut

### ğŸ’¡ Comprendre le Hook useState

## ğŸ“ Tes notes

Detaille ce que tu as appris ici
`src/exercise/01.md`ouÂ surÂ uneÂ pageÂ [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

`useState` est probablement le Hook le plus utilisÃ© car il permet de gÃ©rer les
states. Lors de l'initialisation leur initialisation, les Hooks peuvent
retourner une ou plusieurs valeurs, cela dÃ©pends du Hook. Le Hook `useState`
quant Ã  lui retourne deux donnÃ©es.

- La valeur du `State`
- Son setter (la fonction qui permet de mettre Ã  jour le state, Ã©quivalent de
  `setState` en classe)

```jsx
function Compteur() {
  const [valeur, setValeur] = React.useState(0)
  const incrementer = () => setValeur(valeur + 1)
  return <button onClick={incrementer}>{valeur}</button>
}
```

`useState` prend un argument, la valeur par dÃ©faut lors de l'initialisation,
dans l'exemple ci-dessus, la valeur initiale sera 0 puis sera incrÃ©mentÃ©.

ğŸ“‘ Le liens vers la doc
[useState](https://fr.reactjs.org/docs/hooks-overview.html#state-hook)

## Exercice

Dans cet exercice il va falloir crÃ©er un composant `<Login>` qui contient un
champs email et afficher la valeur de ce champs email en dessous dans une `div`

## Bonus

### 1. ğŸš€ Valeur initiale

Ajoute une valeur initiale au state. Cette valeur sera sera rÃ©cupÃ©rÃ©e via un
prop `initialEmail`, qui lui mÃªme aura une valeur par dÃ©faut `''`. De tel
maniÃ¨re que le composant puisse Ãªtre utilisÃ© de la maniÃ¨re suivante :

```jsx
<Login initialEmail="example@example.com" />
```

### 2. ğŸš€ Validation

Il faudra valider que l'email est correct. On validera seulement la prÃ©sence du
`@` dans la chaine de caractÃ¨re sur chaque appel a `handleChange`. CrÃ©Ã© un state
`error` et utilise ce state pour afficher un message d'erreur.
_`'Votre email est non valide'` en rouge_ ou _`'Votre email est valide'`_ .

### 3. ğŸš€ Lazy initialisation

Certaines opÃ©rations peuvent Ãªtre couteuses en temps comme par exemple des
appels de requÃªtes HTTP, des accÃ¨s disques, comme l'Ã©criture de cookies ou de
donnÃ©es dans le `localStorage.` Cela peut alourdir l'application lorsqu'il y a
trop d'appels au rendu. (cf cycle de vie) . Imaginons que la fonction longue :
`fonctionLongue()` prennent plusieurs secondes. Si on initialise le state par
dÃ©faut `React.useState(fonctionLongue())` la fonction longue sera appelÃ©
systÃ©matiquement alors que l'on a besoin de la valeur qu'une seul fois. Pour
rÃ©soudre cela est possible de passer une fonction flÃ©chÃ©e.
`React.useState(() => fonctionLongue())`. La fonction longue ne sera alors
appelÃ© qu'une seule fois ce qui amÃ©liorera les performances. Dans cet exercice
nous allons stocker l'email dans le `localStorage` avec
`window.localStorage.setItem('email','exemple@exemple.fr')`. Ã  chaque
changement. La valeur initial sera la valeur lue dans le `localstorage` avec
`window.localStorage.getItem('name')`

Utilise donc le Principe de `Lazy initialisation` pour pour charger le state
initial `email` avec la valeur du `localstorage` si prÃ©sente, sinon initialise
avec la valeur du prop `initialEmail`

## Aller plus loin

ğŸ“‘ Le liens vers la doc [useState](https://fr.reactjs.org/docs/hooks-state.html)

## ğŸœ Feedback

Remplir le formulaire le
[formulaire de FeedBack.](https://go.mikecodeur.com/cours-react-avis?entry.1430994900=React%20Hooks&entry.533578441=01%20useState%20:%20valeur%20par%20dÃ©faut)
